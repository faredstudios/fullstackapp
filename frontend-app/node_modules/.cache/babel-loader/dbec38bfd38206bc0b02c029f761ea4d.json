{"ast":null,"code":"\"use strict\";\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExternalPriceAccount = exports.ExternalPriceAccountData = void 0;\n\nconst mpl_core_1 = require(\"@metaplex-foundation/mpl-core\");\n\nconst VaultProgram_1 = require(\"../VaultProgram\");\n\nclass ExternalPriceAccountData extends mpl_core_1.Borsh.Data {\n  constructor(args) {\n    super(args);\n    this.key = VaultProgram_1.VaultKey.ExternalPriceAccountV1;\n  }\n\n}\n\nexports.ExternalPriceAccountData = ExternalPriceAccountData;\n_a = ExternalPriceAccountData;\nExternalPriceAccountData.SCHEMA = _a.struct([['key', 'u8'], ['pricePerShare', 'u64'], ['priceMint', 'pubkeyAsString'], ['allowedToCombine', 'u8']]);\n\nclass ExternalPriceAccount extends mpl_core_1.Account {\n  constructor(key, info) {\n    super(key, info);\n\n    if (!this.assertOwner(VaultProgram_1.VaultProgram.PUBKEY)) {\n      throw (0, mpl_core_1.ERROR_INVALID_OWNER)();\n    }\n\n    if (!ExternalPriceAccount.isCompatible(this.info.data)) {\n      throw (0, mpl_core_1.ERROR_INVALID_ACCOUNT_DATA)();\n    }\n\n    this.data = ExternalPriceAccountData.deserialize(this.info.data);\n  }\n\n  static isCompatible(data) {\n    return data[0] === VaultProgram_1.VaultKey.ExternalPriceAccountV1;\n  }\n\n}\n\nexports.ExternalPriceAccount = ExternalPriceAccount;","map":{"version":3,"mappings":";;;;;;;;;AAGA;;AAQA;;AAOA,MAAaA,wBAAb,SAA8CC,iBAAMC,IAApD,CAA8D;AAgB5DC,cAAYC,IAAZ,EAAsB;AACpB,UAAMA,IAAN;AACA,SAAKC,GAAL,GAAWC,wBAASC,sBAApB;AACD;;AAnB2D;;AAA9DC;;AACkBR,kCAASS,EAAI,CAACC,MAAL,CAAY,CACnC,CAAC,KAAD,EAAQ,IAAR,CADmC,EAEnC,CAAC,eAAD,EAAkB,KAAlB,CAFmC,EAGnC,CAAC,WAAD,EAAc,gBAAd,CAHmC,EAInC,CAAC,kBAAD,EAAqB,IAArB,CAJmC,CAAZ,CAAT;;AAqBlB,MAAaC,oBAAb,SAA0CV,kBAA1C,CAA2E;AACzEE,cAAYE,GAAZ,EAA+BO,IAA/B,EAAwD;AACtD,UAAMP,GAAN,EAAWO,IAAX;;AAEA,QAAI,CAAC,KAAKC,WAAL,CAAiBP,4BAAaQ,MAA9B,CAAL,EAA4C;AAC1C,YAAM,qCAAN;AACD;;AAED,QAAI,CAACH,oBAAoB,CAACI,YAArB,CAAkC,KAAKH,IAAL,CAAUI,IAA5C,CAAL,EAAwD;AACtD,YAAM,4CAAN;AACD;;AAED,SAAKA,IAAL,GAAYhB,wBAAwB,CAACiB,WAAzB,CAAqC,KAAKL,IAAL,CAAUI,IAA/C,CAAZ;AACD;;AAEkB,SAAZD,YAAY,CAACC,IAAD,EAAa;AAC9B,WAAOA,IAAI,CAAC,CAAD,CAAJ,KAAYV,wBAASC,sBAA5B;AACD;;AAjBwE;;AAA3EC","names":["ExternalPriceAccountData","mpl_core_1","Data","constructor","args","key","VaultProgram_1","ExternalPriceAccountV1","exports","_a","struct","ExternalPriceAccount","info","assertOwner","PUBKEY","isCompatible","data","deserialize"],"sources":["../../../src/accounts/ExternalPriceAccount.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}