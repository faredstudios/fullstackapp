{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UpdateMetadata = exports.UpdateMetadataArgs = void 0;\n\nconst mpl_core_1 = require(\"@metaplex-foundation/mpl-core\");\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst Metadata_1 = require(\"../accounts/Metadata\");\n\nconst MetadataProgram_1 = require(\"../MetadataProgram\");\n\nclass UpdateMetadataArgs extends mpl_core_1.Borsh.Data {\n  constructor() {\n    super(...arguments);\n    this.instruction = 1;\n  }\n\n}\n\nexports.UpdateMetadataArgs = UpdateMetadataArgs;\nUpdateMetadataArgs.SCHEMA = new Map([...Metadata_1.MetadataDataData.SCHEMA, ...UpdateMetadataArgs.struct([['instruction', 'u8'], ['data', {\n  kind: 'option',\n  type: Metadata_1.MetadataDataData\n}], ['updateAuthority', {\n  kind: 'option',\n  type: 'pubkeyAsString'\n}], ['primarySaleHappened', {\n  kind: 'option',\n  type: 'u8'\n}]])]);\n\nclass UpdateMetadata extends mpl_core_1.Transaction {\n  constructor(options, params) {\n    super(options);\n    const {\n      metadata,\n      metadataData,\n      updateAuthority,\n      newUpdateAuthority,\n      primarySaleHappened\n    } = params;\n    const data = UpdateMetadataArgs.serialize({\n      data: metadataData,\n      updateAuthority: newUpdateAuthority && newUpdateAuthority.toString(),\n      primarySaleHappened: primarySaleHappened || null\n    });\n    this.add(new web3_js_1.TransactionInstruction({\n      keys: [{\n        pubkey: metadata,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: updateAuthority,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: MetadataProgram_1.MetadataProgram.PUBKEY,\n      data\n    }));\n  }\n\n}\n\nexports.UpdateMetadata = UpdateMetadata;","map":{"version":3,"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,MAAaA,kBAAb,SAAwCC,iBAAMC,IAA9C,CAIE;AAJFC;;AAeE,uBAAc,CAAd;AAKD;;AAhBC;;AAJFC;AAKkBJ,4BAAS,IAAIK,GAAJ,CAAQ,CAC/B,GAAGC,4BAAiBC,MADW,EAE/B,GAAGP,kBAAkB,CAACQ,MAAnB,CAA0B,CAC3B,CAAC,aAAD,EAAgB,IAAhB,CAD2B,EAE3B,CAAC,MAAD,EAAS;AAAEC,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAEJ;AAAxB,CAAT,CAF2B,EAG3B,CAAC,iBAAD,EAAoB;AAAEG,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAE;AAAxB,CAApB,CAH2B,EAI3B,CAAC,qBAAD,EAAwB;AAAED,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAE;AAAxB,CAAxB,CAJ2B,CAA1B,CAF4B,CAAR,CAAT;;AAyBlB,MAAaC,cAAb,SAAoCV,sBAApC,CAA+C;AAC7CE,cAAYS,OAAZ,EAA4CC,MAA5C,EAAwE;AACtE,UAAMD,OAAN;AACA,UAAM;AAAEE,cAAF;AAAYC,kBAAZ;AAA0BC,qBAA1B;AAA2CC,wBAA3C;AAA+DC;AAA/D,QACJL,MADF;AAGA,UAAMM,IAAI,GAAGnB,kBAAkB,CAACoB,SAAnB,CAA6B;AACxCD,UAAI,EAAEJ,YADkC;AAExCC,qBAAe,EAAEC,kBAAkB,IAAIA,kBAAkB,CAACI,QAAnB,EAFC;AAGxCH,yBAAmB,EAAEA,mBAAmB,IAAI;AAHJ,KAA7B,CAAb;AAMA,SAAKI,GAAL,CACE,IAAIC,gCAAJ,CAA2B;AACzBC,UAAI,EAAE,CACJ;AACEC,cAAM,EAAEX,QADV;AAEEY,gBAAQ,EAAE,KAFZ;AAGEC,kBAAU,EAAE;AAHd,OADI,EAMJ;AACEF,cAAM,EAAET,eADV;AAEEU,gBAAQ,EAAE,IAFZ;AAGEC,kBAAU,EAAE;AAHd,OANI,CADmB;AAazBC,eAAS,EAAEC,kCAAgBC,MAbF;AAczBX;AAdyB,KAA3B,CADF;AAkBD;;AA9B4C;;AAA/Cf","names":["UpdateMetadataArgs","mpl_core_1","Data","constructor","exports","Map","Metadata_1","SCHEMA","struct","kind","type","UpdateMetadata","options","params","metadata","metadataData","updateAuthority","newUpdateAuthority","primarySaleHappened","data","serialize","toString","add","web3_js_1","keys","pubkey","isSigner","isWritable","programId","MetadataProgram_1","PUBKEY"],"sources":["../../../src/transactions/UpdateMetadata.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}