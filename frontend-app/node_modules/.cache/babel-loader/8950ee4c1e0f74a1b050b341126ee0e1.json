{"ast":null,"code":"import { apiCall } from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"./errors\";\nexport function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\nexport function authUser(type, userData) {\n  return dispatch => {\n    return new Promise((resolve, reject) => {\n      return apiCall(\"post\", '/api/auth/${type}', userData).then(_ref => {\n        let {\n          token,\n          ...user\n        } = _ref;\n        localStorage.setItem(\"jwToken\", token);\n        dispatch(setCurrentUser(userData.walletID));\n        resolve();\n      }).catch(err => {\n        dispatch(addError(err.message));\n        reject();\n      });\n    });\n  };\n}","map":{"version":3,"sources":["C:/Users/MSI/Documents/CG/fullstackapp/frontend-app/src/store/actions/auth.js"],"names":["apiCall","SET_CURRENT_USER","addError","removeError","setCurrentUser","user","type","authUser","userData","dispatch","Promise","resolve","reject","then","token","localStorage","setItem","walletID","catch","err","message"],"mappings":"AAAA,SAASA,OAAT,QAAwB,oBAAxB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAAQC,QAAR,EAAkBC,WAAlB,QAAoC,UAApC;AAEA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AACpC,SAAM;AACLC,IAAAA,IAAI,EAAEL,gBADD;AAELI,IAAAA;AAFK,GAAN;AAIA;AAED,OAAO,SAASE,QAAT,CAAkBD,IAAlB,EAAwBE,QAAxB,EAAiC;AACvC,SAAOC,QAAQ,IAAI;AAClB,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvC,aAAOZ,OAAO,CAAC,MAAD,EAAS,mBAAT,EAA8BQ,QAA9B,CAAP,CAA+CK,IAA/C,CAAoD,QAAsB;AAAA,YAArB;AAACC,UAAAA,KAAD;AAAQ,aAAGT;AAAX,SAAqB;AAChFU,QAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCF,KAAhC;AACAL,QAAAA,QAAQ,CAACL,cAAc,CAACI,QAAQ,CAACS,QAAV,CAAf,CAAR;AACAN,QAAAA,OAAO;AACP,OAJM,EAKNO,KALM,CAKAC,GAAG,IAAI;AACbV,QAAAA,QAAQ,CAACP,QAAQ,CAACiB,GAAG,CAACC,OAAL,CAAT,CAAR;AACAR,QAAAA,MAAM;AACN,OARM,CAAP;AASA,KAVM,CAAP;AAWA,GAZD;AAaA","sourcesContent":["import { apiCall } from \"../../services/api\";\r\nimport { SET_CURRENT_USER } from \"../actionTypes\";\r\nimport {addError, removeError} from \"./errors\";\r\n\r\nexport function setCurrentUser(user) {\r\n\treturn{\r\n\t\ttype: SET_CURRENT_USER,\r\n\t\tuser\r\n\t};\r\n}\r\n\r\nexport function authUser(type, userData){\r\n\treturn dispatch => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\treturn apiCall(\"post\", '/api/auth/${type}', userData).then(({token, ...user}) => {\r\n\t\t\t\tlocalStorage.setItem(\"jwToken\", token)\r\n\t\t\t\tdispatch(setCurrentUser(userData.walletID));\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tdispatch(addError(err.message));\r\n\t\t\t\treject();\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}"]},"metadata":{},"sourceType":"module"}