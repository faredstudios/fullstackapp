{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UpdateMetadataV2 = exports.UpdateMetadataV2Args = void 0;\n\nconst mpl_core_1 = require(\"@metaplex-foundation/mpl-core\");\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst Metadata_1 = require(\"../accounts/Metadata\");\n\nconst MetadataProgram_1 = require(\"../MetadataProgram\");\n\nclass UpdateMetadataV2Args extends mpl_core_1.Borsh.Data {\n  constructor() {\n    super(...arguments);\n    this.instruction = 15;\n  }\n\n}\n\nexports.UpdateMetadataV2Args = UpdateMetadataV2Args;\nUpdateMetadataV2Args.SCHEMA = new Map([...Metadata_1.DataV2.SCHEMA, ...UpdateMetadataV2Args.struct([['instruction', 'u8'], ['data', {\n  kind: 'option',\n  type: Metadata_1.DataV2\n}], ['updateAuthority', {\n  kind: 'option',\n  type: 'pubkeyAsString'\n}], ['primarySaleHappened', {\n  kind: 'option',\n  type: 'u8'\n}], ['isMutable', {\n  kind: 'option',\n  type: 'u8'\n}]])]);\n\nclass UpdateMetadataV2 extends mpl_core_1.Transaction {\n  constructor(options, params) {\n    super(options);\n    const {\n      metadata,\n      metadataData,\n      updateAuthority,\n      newUpdateAuthority,\n      primarySaleHappened,\n      isMutable\n    } = params;\n    const data = UpdateMetadataV2Args.serialize({\n      data: metadataData,\n      updateAuthority: newUpdateAuthority && newUpdateAuthority.toString(),\n      primarySaleHappened: primarySaleHappened || null,\n      isMutable: isMutable || null\n    });\n    this.add(new web3_js_1.TransactionInstruction({\n      keys: [{\n        pubkey: metadata,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: updateAuthority,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: MetadataProgram_1.MetadataProgram.PUBKEY,\n      data\n    }));\n  }\n\n}\n\nexports.UpdateMetadataV2 = UpdateMetadataV2;","map":{"version":3,"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,MAAaA,oBAAb,SAA0CC,iBAAMC,IAAhD,CAKE;AALFC;;AAiBE,uBAAc,EAAd;AAMD;;AAlBC;;AALFC;AAMkBJ,8BAAS,IAAIK,GAAJ,CAAQ,CAC/B,GAAGC,kBAAOC,MADqB,EAE/B,GAAGP,oBAAoB,CAACQ,MAArB,CAA4B,CAC7B,CAAC,aAAD,EAAgB,IAAhB,CAD6B,EAE7B,CAAC,MAAD,EAAS;AAAEC,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAEJ;AAAxB,CAAT,CAF6B,EAG7B,CAAC,iBAAD,EAAoB;AAAEG,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAE;AAAxB,CAApB,CAH6B,EAI7B,CAAC,qBAAD,EAAwB;AAAED,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAE;AAAxB,CAAxB,CAJ6B,EAK7B,CAAC,WAAD,EAAc;AAAED,MAAI,EAAE,QAAR;AAAkBC,MAAI,EAAE;AAAxB,CAAd,CAL6B,CAA5B,CAF4B,CAAR,CAAT;;AA4BlB,MAAaC,gBAAb,SAAsCV,sBAAtC,CAAiD;AAC/CE,cAAYS,OAAZ,EAA4CC,MAA5C,EAA0E;AACxE,UAAMD,OAAN;AACA,UAAM;AACJE,cADI;AAEJC,kBAFI;AAGJC,qBAHI;AAIJC,wBAJI;AAKJC,yBALI;AAMJC;AANI,QAOFN,MAPJ;AASA,UAAMO,IAAI,GAAGpB,oBAAoB,CAACqB,SAArB,CAA+B;AAC1CD,UAAI,EAAEL,YADoC;AAE1CC,qBAAe,EAAEC,kBAAkB,IAAIA,kBAAkB,CAACK,QAAnB,EAFG;AAG1CJ,yBAAmB,EAAEA,mBAAmB,IAAI,IAHF;AAI1CC,eAAS,EAAEA,SAAS,IAAI;AAJkB,KAA/B,CAAb;AAOA,SAAKI,GAAL,CACE,IAAIC,gCAAJ,CAA2B;AACzBC,UAAI,EAAE,CACJ;AACEC,cAAM,EAAEZ,QADV;AAEEa,gBAAQ,EAAE,KAFZ;AAGEC,kBAAU,EAAE;AAHd,OADI,EAMJ;AACEF,cAAM,EAAEV,eADV;AAEEW,gBAAQ,EAAE,IAFZ;AAGEC,kBAAU,EAAE;AAHd,OANI,CADmB;AAazBC,eAAS,EAAEC,kCAAgBC,MAbF;AAczBX;AAdyB,KAA3B,CADF;AAkBD;;AArC8C;;AAAjDhB","names":["UpdateMetadataV2Args","mpl_core_1","Data","constructor","exports","Map","Metadata_1","SCHEMA","struct","kind","type","UpdateMetadataV2","options","params","metadata","metadataData","updateAuthority","newUpdateAuthority","primarySaleHappened","isMutable","data","serialize","toString","add","web3_js_1","keys","pubkey","isSigner","isWritable","programId","MetadataProgram_1","PUBKEY"],"sources":["../../../src/transactions/UpdateMetadataV2.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}